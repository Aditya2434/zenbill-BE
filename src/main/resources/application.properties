spring.application.name=invoice-management-system
server.port=${PORT:8080}

## --- Database Configuration ---
#spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/invoice_db}
#spring.datasource.username=${DB_USERNAME:postgres}
#spring.datasource.password=${DB_PASSWORD:root}
#spring.datasource.driver-class-name=org.postgresql.Driver
#
## --- JPA & Hibernate (DEV SETTINGS - FOR FIRST RUN) ---
## We are changing 'validate' to 'update' so Hibernate will
## CREATE the 'users' and 'companies' tables for us.
#spring.jpa.hibernate.ddl-auto=update
#
## We are changing 'false' to 'true' to see the SQL commands in the log.
#spring.jpa.show-sql=false
#spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.datasource.url=${DB_URL:jdbc:postgresql://aws-0-ap-south-1.pooler.supabase.com:6543/postgres?sslmode=require&pgbouncer=true}
spring.datasource.username=${DB_USERNAME:postgres.ibjdkvpbvipzmsdnqzwn}
spring.datasource.password=${DB_PASSWORD:Admin@736399}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Connection Pool Configuration (for Supabase Transaction Mode)
spring.datasource.hikari.maximum-pool-size=3
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.auto-commit=true

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.batch_size=15
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# --- Error Logging ---
server.error.include-stacktrace=NEVER
server.error.include-message=on_param

# --- Springdoc OpenAPI (Swagger) ---
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.api-docs.path=/api-docs
springdoc.paths-to-match=/api/v1/**

# --- JWT Security Configuration ---
jwt.secret-key=${JWT_SECRET:VGhpc0lzTXlTdXBlclNlY3VyZURlZmF1bHRLZXlGb3JEZXZlbG9wbWVudA==}
# JWT expiration set to 32 days (32 * 24 * 60 * 60 * 1000 = 2764800000 ms)
jwt.expiration-ms=2764800000

# --- Map 404 to exceptions (so GlobalExceptionHandler can format) ---
# Commented out to allow serving static files from frontend
# spring.mvc.throw-exception-if-no-handler-found=true
# spring.web.resources.add-mappings=false

# --- DEV-ONLY SETTINGS (Keep these commented out) ---
# When you need to debug on your local machine,
# temporarily uncomment these lines.
# *** DO NOT COMMIT these changes to Git. ***
#
# logging.level.org.springframework.web=DEBUG
# logging.level.org.hibernate.SQL=DEBUG
# server.error.include-stacktrace=ALWAYS

# --- Supabase Storage Configuration ---
# These should point to environment variables in production.
# The service role key is highly sensitive; never commit a value here.
supabase.url=${SUPABASE_URL:https://ibjdkvpbvipzmsdnqzwn.supabase.co}
supabase.service_role_key=${SUPABASE_SERVICE_ROLE_KEY:eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImliamRrdnBidmlwem1zZG5xenduIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MTk3MzgwNiwiZXhwIjoyMDc3NTQ5ODA2fQ.AkmZYa6AQenbtq126tJGHFA7WzcBVPn_IPma5NrK2es}
supabase.default_bucket=${SUPABASE_DEFAULT_BUCKET:document}